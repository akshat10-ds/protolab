/* Ink Design System - Checkbox - Official DS-UI Pattern */

.wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--ink-spacing-50); /* 4px */
  min-height: var(--ink-icon-size-s);
  min-width: var(--ink-icon-size-s);
  position: relative;
}

.checkboxWrapper {
  display: flex;
  align-items: flex-start;
  position: relative;
}

/* Visually Hidden Input - Accessible but not visible */
.input {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Label - Contains the visual checkbox via pseudo-elements */
.label {
  font-family: var(--ink-font-family);
  font-size: 14px;
  font-weight: 400;
  line-height: 1.4;
  color: var(--ink-font-color-default);
  cursor: pointer;
  user-select: none;
  display: inline-flex;
  align-items: flex-start;
  position: relative;
  padding-block-start: var(--ink-spacing-100); /* 8px */
  padding-block-end: var(--ink-spacing-100);
  padding-inline-start: var(--ink-spacing-400); /* 32px - 24px checkbox container + 8px gap */
}

/* Checkbox box - 20px Ã— 20px in 24px container */
.label::before {
  content: '';
  position: absolute;
  width: var(--ink-icon-size-s);
  height: var(--ink-icon-size-s);
  background-color: var(--ink-form-control-bg-color-default);
  border: var(--ink-form-border-width-active) solid var(--ink-form-control-border-color-default);
  border-radius: var(--ink-radius-size-xs); /* 4px */
  left: 2px; /* 2px offset from left to center in 24px space */
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  transition-duration: 0.2s;
  transition-property: border, background;
  transition-timing-function: ease;
  z-index: 2; /* Above hover background */
}

/* Check icon - Using label::after with SVG data URL */
.label::after {
  content: '';
  pointer-events: none;
  position: absolute;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="white" width="20" height="20" aria-hidden="true" focusable="false"><path d="M7.39 14.74 3 10.35l1.34-1.34L8 12.67 16.66 4 18 5.34l-9.39 9.39c-.17.17-.39.26-.61.26s-.44-.1-.61-.26Z"></path></svg>');
  color: white;
  height: var(--ink-icon-size-s);
  width: var(--ink-icon-size-s);
  left: 2px; /* Match checkbox position */
  top: 50%;
  transform: translateY(-50%);
  z-index: 3; /* Above checkbox box */
}

/* Inner span - Used for hover/focus effects */
.label > span {
  position: relative;
}

.label > span::before {
  content: '';
  display: block;
  position: absolute;
  height: 26px;
  width: 26px;
  inset-inline-start: -33px; /* Position over checkbox - span starts at 32px, checkbox at 2px, need to go back 31px + center */
  top: 50%;
  transform: translateY(-50%);
  border-radius: var(--ink-radius-sm);
  background-color: transparent;
  transition-duration: 0.1s;
  transition-property: background-color, height, width, inset, transform;
  transition-timing-function: ease;
  z-index: 1; /* Behind the checkbox but above background */
}

/* Label text container */
.labelText {
  align-items: center;
  display: flex;
  min-height: var(--ink-icon-size-s);
  padding-block-start: 2px; /* Align with checkbox baseline */
}

/* Hide check icon when NOT checked or indeterminate */
.input:not(:checked):not(:indeterminate) + .label::after {
  display: none;
}

/* Checked state */
.input:checked + .label::before {
  background-color: var(--ink-form-control-bg-color-selected);
  border-color: var(--ink-form-border-selected);
}

.input:checked + .label::after {
  border-color: var(--ink-white-100);
}

/* Indeterminate state */
.input:indeterminate + .label::before {
  background-color: var(--ink-form-control-bg-color-selected);
  border-color: var(--ink-form-border-selected);
}

.input:indeterminate + .label::after {
  background-image: none;
  background-color: var(--ink-white-100);
  content: '';
  height: 2px;
  left: 5px; /* 2px checkbox + 3px offset to center 14px dash */
  top: 50%;
  width: 14px;
  /* Keep transform for vertical centering */
}

/* Hover state - Border changes to hover color */
.label:hover::before {
  border-color: var(--ink-form-control-border-color-hover);
}

/* Hover effect - Background area around checkbox - 32px per Figma */
.label:hover > span::before {
  background-color: var(--ink-form-bg-highlight);
  border-radius: var(--ink-radius-size-xs); /* 4px to match checkbox */
  content: '';
  height: var(--ink-spacing-400);
  width: var(--ink-spacing-400);
  inset-inline-start: -36px; /* Center 32px bg over 20px checkbox (checkbox at 2px + 10px center = 12px, 32px hover centered = 12-16 = -4px, from span at 32px = -4-32 = -36px) */
  /* Vertical centering handled by top: 50% + transform in base style */
}

/* Active state - Remove hover background on click */
.label:active > span::before {
  background-color: transparent;
}

.input:checked + .label:hover::before,
.input:indeterminate + .label:hover::before {
  background-color: var(--ink-form-control-bg-color-selected-hover);
  border-color: var(--ink-form-border-selected-hover);
}

/* Focus state - Focus ring on span::after */
.input:focus-visible + .label > span::after {
  content: '';
  display: block;
  position: absolute;
  height: 22px;
  inset-inline-start: -31px; /* Position to center around checkbox */
  top: 50%;
  transform: translateY(-50%);
  width: 22px;
  border: 2px solid var(--ink-form-control-border-color-active);
  border-radius: var(--ink-radius-size-xs); /* 4px */
  box-shadow: var(--ink-focus-ring-accent);
  pointer-events: none;
}

/* Error State */
.input[aria-invalid='true'] + .label::before {
  border-color: var(--ink-form-control-border-color-error);
}

.input[aria-invalid='true']:checked + .label::before,
.input[aria-invalid='true']:indeterminate + .label::before {
  background-color: var(--ink-form-control-border-color-error);
}

.input[aria-invalid='true'] + .label:hover::before {
  border-color: var(--ink-form-control-border-color-error);
}

.input[aria-invalid='true']:focus-visible + .label > span::after {
  border-color: var(--ink-form-control-border-color-error);
  box-shadow: var(--ink-focus-ring-error);
}

/* Disabled state */
.input:disabled + .label {
  opacity: var(--ink-opacity-disabled);
  cursor: not-allowed;
}

.input:disabled + .label::before {
  background-color: var(--ink-neutral-10);
  border-color: var(--ink-neutral-30);
  cursor: not-allowed;
}

/* Prevent hover effect on disabled */
.input:disabled + .label:hover > span::before {
  background-color: transparent;
}

.input:disabled + .label:hover::before {
  border-color: var(--ink-neutral-30);
}

.input:disabled:active + .label::before {
  border-color: var(--ink-neutral-30);
}

.input:checked:disabled + .label::before,
.input:indeterminate:disabled + .label::before {
  background-color: var(--ink-neutral-50);
  border-color: var(--ink-neutral-50);
}

.label.disabled {
  color: var(--ink-form-text-disabled);
  cursor: not-allowed;
}

/* Visually Hidden Label */
.visuallyHidden .labelText {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Description */
.description {
  font-family: var(--ink-font-family);
  font-size: 12px;
  font-weight: 400;
  line-height: 1.4;
  color: var(--ink-font-color-neutral);
  margin-left: var(--ink-spacing-400); /* 32px - 24px checkbox container + 8px gap */
}

/* Error Message */
.errorMessage {
  font-family: var(--ink-font-family);
  font-size: 12px;
  font-weight: 500;
  line-height: 1.5;
  letter-spacing: 0.16px;
  color: var(--ink-font-color-error);
  margin-left: var(--ink-spacing-400);
  display: flex;
  align-items: center;
  gap: var(--ink-spacing-50);
}
